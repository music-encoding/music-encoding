<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../validation/mei_odds.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="../validation/mei_odds.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<specGrp xmlns="http://www.tei-c.org/ns/1.0" xmlns:tei="http://www.tei-c.org/ns/1.0"
  xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:rng="http://relaxng.org/ns/structure/1.0"
  xmlns:sch="http://purl.oclc.org/dsdl/schematron" xml:id="module.MEI.frbr">
  <moduleSpec ident="MEI.frbr">
    <desc>FRBR (Functional Requirements for Bibliographic Records) declarations.</desc>
  </moduleSpec>
  <macroSpec ident="data.FRBRRELATIONSHIP" module="MEI.frbr" type="dt">
    <desc>Relationships between FRBR entities.</desc>
    <content>
      <valList type="closed">
        <valItem ident="hasAbridgement">
          <desc>Target is an abridgement, condensation, or expurgation of the current entity.</desc>
        </valItem>
        <valItem ident="isAbridgementOf">
          <desc>Reciprocal relationship of hasAbridgement.</desc>
        </valItem>
        <valItem ident="hasAdaptation">
          <desc>Target is an adaptation, paraphrase, free translation, variation (music),
            harmonization (music), or fantasy (music) of the current entity.</desc>
        </valItem>
        <valItem ident="isAdaptationOf">
          <desc>Reciprocal relationship of hasAdaptation.</desc>
        </valItem>
        <valItem ident="hasAlternate">
          <desc>Target is an alternate format or simultaneously released edition of the current
            entity.</desc>
        </valItem>
        <valItem ident="isAlternateOf">
          <desc>Reciprocal relationship of hasAlternate.</desc>
        </valItem>
        <valItem ident="hasArrangement">
          <desc>Target is an arrangement (music) of the current entity.</desc>
        </valItem>
        <valItem ident="isArrangementOf">
          <desc>Reciprocal relationship of hasArrangement.</desc>
        </valItem>
        <valItem ident="hasComplement">
          <desc>Target is a cadenza, libretto, choreography, ending for unfinished work, incidental
            music, or musical setting of a text of the current entity.</desc>
        </valItem>
        <valItem ident="isComplementOf">
          <desc>Reciprocal relationship of hasComplement.</desc>
        </valItem>
        <valItem ident="hasEmbodiment">
          <desc>Target is a physical embodiment of the current abstract entity; describes the
            expression-to-manifestation relationship.</desc>
        </valItem>
        <valItem ident="isEmbodimentOf">
          <desc>Reciprocal relationship of hasEmbodiment.</desc>
        </valItem>
        <valItem ident="hasExemplar">
          <desc>Target is an exemplar of the class of things represented by the current entity;
            describes the manifestation-to-item relationship.</desc>
        </valItem>
        <valItem ident="isExemplarOf">
          <desc>Reciprocal relationship of hasExamplar.</desc>
        </valItem>
        <valItem ident="hasImitation">
          <desc>Target is a parody, imitation, or travesty of the current entity.</desc>
        </valItem>
        <valItem ident="isImitationOf">
          <desc>Reciprocal relationship of hasImitation.</desc>
        </valItem>
        <valItem ident="hasPart">
          <desc>Target is a chapter, section, part, etc.; volume of a multivolume manifestation;
            volume/issue of serial; intellectual part of a multi-part work; illustration for a text;
            sound aspect of a film; soundtrack for a film on separate medium; soundtrack for a film
            embedded in film; monograph in a series; physical component of a particular copy; the
            binding of a book of the current entity.</desc>
        </valItem>
        <valItem ident="isPartOf">
          <desc>Reciprocal relationship of hasPart.</desc>
        </valItem>
        <valItem ident="hasRealization">
          <desc>Target is a realization of the current entity; describes the work-to-expression
            relationship.</desc>
        </valItem>
        <valItem ident="isRealizationOf">
          <desc>Reciprocal relationship of hasRealization.</desc>
        </valItem>
        <valItem ident="hasReconfiguration">
          <desc>Target has been reconfigured: bound with, split into, extracted from the current
            entity.</desc>
        </valItem>
        <valItem ident="isReconfigurationOf">
          <desc>Reciprocal relationship of hasReconfiguration.</desc>
        </valItem>
        <valItem ident="hasReproduction">
          <desc>Target is a reproduction, microreproduction, macroreproduction, reprint,
            photo-offset reprint, or facsimile of the current entity.</desc>
        </valItem>
        <valItem ident="isReproductionOf">
          <desc>Reciprocal relationship of hasReproduction.</desc>
        </valItem>
        <valItem ident="hasRevision">
          <desc>Target is a revised edition, enlarged edition, or new state (graphic) of the current
            entity.</desc>
        </valItem>
        <valItem ident="isRevisionOf">
          <desc>Reciprocal relationship of hasRevision.</desc>
        </valItem>
        <valItem ident="hasSuccessor">
          <desc>Target is a sequel or succeeding work of the current entity.</desc>
        </valItem>
        <valItem ident="isSuccessorOf">
          <desc>Reciprocal relationship of hasSuccessor.</desc>
        </valItem>
        <valItem ident="hasSummarization">
          <desc>Target is a digest or abstract of the current entity.</desc>
        </valItem>
        <valItem ident="isSummarizationOf">
          <desc>Reciprocal relationship of hasSummarization.</desc>
        </valItem>
        <valItem ident="hasSupplement">
          <desc>Target is an index, concordance, teacher's guide, gloss, supplement, or appendix of
            the current entity.</desc>
        </valItem>
        <valItem ident="isSupplementOf">
          <desc>Reciprocal relationship of hasSupplement.</desc>
        </valItem>
        <valItem ident="hasTransformation">
          <desc>Target is a dramatization, novelization, versification, or screenplay of the current
            entity.</desc>
        </valItem>
        <valItem ident="isTransformationOf">
          <desc>Reciprocal relationship of hasTransformation.</desc>
        </valItem>
        <valItem ident="hasTranslation">
          <desc>Target is a literal translation or transcription (music) of the current
            entity.</desc>
        </valItem>
        <valItem ident="isTranslationOf">
          <desc>Reciprocal relationship of hasTranslation.</desc>
        </valItem>
      </valList>
    </content>
  </macroSpec>
  <classSpec ident="model.expressionLike" type="model" module="MEI.frbr">
    <desc>Collects FRBR expression-like elements.</desc>
  </classSpec>
  <classSpec ident="model.itemLike" type="model" module="MEI.frbr">
    <desc>Collects FRBR item-like elements.</desc>
  </classSpec>
  <classSpec ident="model.manifestationLike" type="model" module="MEI.frbr">
    <desc>Collects FRBR manifestation-like elements.</desc>
  </classSpec>
  <elementSpec ident="componentList" module="MEI.header">
    <desc>Container for intellectual or physical component parts of a bibliographic entity.</desc>
    <classes>
      <memberOf key="att.common"/>
    </classes>
    <content>
      <rng:zeroOrMore>
        <rng:ref name="model.headLike"/>
      </rng:zeroOrMore>
      <rng:choice>
        <rng:choice>
          <rng:zeroOrMore>
            <rng:ref name="model.workLike"/>
          </rng:zeroOrMore>
          <rng:zeroOrMore>
            <rng:ref name="model.expressionLike"/>
          </rng:zeroOrMore>
        </rng:choice>
        <rng:choice>
          <rng:zeroOrMore>
            <rng:ref name="model.manifestationLike"/>
          </rng:zeroOrMore>
          <rng:zeroOrMore>
            <rng:ref name="model.itemLike"/>
          </rng:zeroOrMore>
        </rng:choice>
      </rng:choice>
    </content>
    <constraintSpec ident="checkComponentList" scheme="isoschematron">
      <constraint>
        <sch:rule context="mei:componentList">
          <sch:assert
            test="every $i in ./child::mei:*[not(local-name()='head')] satisfies 
            $i/local-name() eq ./parent::mei:*/local-name()"
            >Only child elements of the same name as the parent of the componentList are
            allowed.</sch:assert>
        </sch:rule>
      </constraint>
    </constraintSpec>
    <constraintSpec ident="checkComponents" scheme="isoschematron">
      <constraint>
        <sch:rule context="mei:componentList[mei:*[@comptype]]">
          <sch:assert role="warning"
            test="count(mei:*[@comptype]) = count(mei:*[local-name() ne 'head'])">When any child
            element has a comptype attribute, it is recommended that comptype appear on all child
            elements.</sch:assert>
        </sch:rule>
      </constraint>
    </constraintSpec>
    <remarks>
      <p>The child elements of this element are treated as components of the bibliographic entity
        containing the <gi scheme="MEI">componentList</gi>. Although this is an implicit way of
        expressing FRBR's hasPart and isPartOf relationships, it avoids this terminology in order to
        prevent confusion with musical terminology. Work, expression, and item components must be
        the same type as the parent of componentList: <gi scheme="MEI">work</gi> children are
        allowed within <gi scheme="MEI">work</gi>, etc. Manifestations; i.e., sources, may have
        either <gi scheme="MEI">source</gi> or <gi scheme="MEI">item</gi>components as required to
        accommodate composite sources (those containing multiple sources) or multi-part sources
        (those made up of several physical items.</p>
    </remarks>
  </elementSpec>
  <elementSpec ident="expression" module="MEI.frbr">
    <desc>Intellectual or artistic realization of a work.</desc>
    <classes>
      <memberOf key="att.common"/>
      <memberOf key="att.authorized"/>
      <memberOf key="att.bibl"/>
      <memberOf key="att.dataPointing"/>
      <memberOf key="model.expressionLike"/>
    </classes>
    <content>
      <rng:zeroOrMore>
        <rng:ref name="model.headLike"/>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:ref name="model.identifierLike"/>
      </rng:zeroOrMore>
      <rng:oneOrMore>
        <rng:ref name="model.titleLike"/>
      </rng:oneOrMore>
      <rng:zeroOrMore>
        <rng:ref name="model.respLikePart"/>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:ref name="model.workIdent"/>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:ref name="otherChar"/>
      </rng:zeroOrMore>
      <rng:optional>
        <rng:ref name="creation"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="history"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="langUsage"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="perfMedium"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="perfDuration"/>
      </rng:optional>
      <rng:zeroOrMore>
        <rng:ref name="extent"/>
      </rng:zeroOrMore>
      <rng:optional>
        <rng:ref name="scoreFormat"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="contents"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="context"/>
      </rng:optional>
      <rng:zeroOrMore>
        <rng:ref name="biblList"/>
      </rng:zeroOrMore>
      <rng:optional>
        <rng:ref name="notesStmt"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="classification"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="componentList"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="relationList"/>
      </rng:optional>
      <rng:zeroOrMore>
        <rng:ref name="extMeta"/>
      </rng:zeroOrMore>
    </content>
    <remarks>
      <p>The <gi scheme="MEI">perfDuration</gi> element captures the <emph>intended duration</emph>
        of the expression, while <gi scheme="MEI">extent</gi> records scope of the expression in
        other terms, such as number of pages, measures, etc.</p>
    </remarks>
  </elementSpec>
  <elementSpec ident="expressionList" module="MEI.frbr">
    <desc>Gathers bibliographic expression entities.</desc>
    <classes>
      <memberOf key="att.common"/>
    </classes>
    <content>
      <rng:zeroOrMore>
        <rng:ref name="model.headLike"/>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:ref name="model.expressionLike"/>
      </rng:zeroOrMore>
    </content>
  </elementSpec>
  <elementSpec ident="item" module="MEI.frbr">
    <desc>Single instance or exemplar of a source/manifestation.</desc>
    <classes>
      <memberOf key="att.common"/>
      <memberOf key="att.authorized"/>
      <memberOf key="att.bibl"/>
      <memberOf key="att.dataPointing"/>
      <memberOf key="att.pointing"/>
      <memberOf key="att.targetEval"/>
      <memberOf key="model.itemLike"/>
    </classes>
    <content>
      <rng:zeroOrMore>
        <rng:ref name="model.headLike"/>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:ref name="model.identifierLike"/>
      </rng:zeroOrMore>
      <rng:optional>
        <rng:ref name="availability"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="physDesc"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="physLoc"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="history"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="notesStmt"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="classification"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="componentList"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="relationList"/>
      </rng:optional>
      <rng:zeroOrMore>
        <rng:ref name="extMeta"/>
      </rng:zeroOrMore>
    </content>
  </elementSpec>
  <elementSpec ident="itemList" module="MEI.frbr">
    <desc>Gathers bibliographic item entities.</desc>
    <classes>
      <memberOf key="att.common"/>
    </classes>
    <content>
      <rng:zeroOrMore>
        <rng:ref name="model.headLike"/>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:ref name="model.itemLike"/>
      </rng:zeroOrMore>
    </content>
  </elementSpec>
  <elementSpec ident="manifestation" module="MEI.frbr">
    <desc>A bibliographic description of a physical embodiment of an expression of a work.</desc>
    <classes>
      <memberOf key="att.common"/>
      <memberOf key="att.authorized"/>
      <memberOf key="att.bibl"/>
      <memberOf key="att.componentType"/>
      <memberOf key="att.dataPointing"/>
      <memberOf key="att.pointing"/>
      <memberOf key="att.recordType"/>
      <memberOf key="att.targetEval"/>
      <memberOf key="model.manifestationLike"/>
    </classes>
    <content>
      <rng:zeroOrMore>
        <rng:ref name="model.headLike"/>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:choice>
          <rng:ref name="locus"/>
          <rng:ref name="locusGrp"/>
        </rng:choice>
      </rng:zeroOrMore>
      <rng:zeroOrMore>
        <rng:ref name="model.identifierLike"/>
      </rng:zeroOrMore>
      <rng:optional>
        <rng:ref name="titleStmt"/>
      </rng:optional>
      <rng:ref name="macro.bibldescPart"/>
      <rng:optional>
        <rng:ref name="creation"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="history"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="langUsage"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="contents"/>
      </rng:optional>
      <rng:zeroOrMore>
        <rng:ref name="biblList"/>
      </rng:zeroOrMore>
      <rng:optional>
        <rng:ref name="notesStmt"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="classification"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="itemList"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="componentList"/>
      </rng:optional>
      <rng:optional>
        <rng:ref name="relationList"/>
      </rng:optional>
      <rng:zeroOrMore>
        <rng:ref name="extMeta"/>
      </rng:zeroOrMore>
    </content>
    <constraintSpec ident="check_singleton" scheme="schematron">
      <constraint>
        <sch:rule context="mei:manifestation[@singleton eq 'true']">
          <sch:assert test="not(mei:itemList)">Item children are not permitted when @singleton
            equals "true".</sch:assert>
        </sch:rule>
      </constraint>
    </constraintSpec>
    <attList>
      <attDef ident="singleton">
        <datatype>
          <rng:ref name="data.BOOLEAN"/>
        </datatype>
      </attDef>
    </attList>
  </elementSpec>
  <elementSpec ident="manifestationList" module="MEI.frbr">
    <desc>A container for the descriptions of physical embodiments of an expression of a
      work.</desc>
    <classes>
      <memberOf key="att.common"/>
    </classes>
    <content>
      <rng:zeroOrMore>
        <rng:ref name="model.headLike"/>
      </rng:zeroOrMore>
      <rng:oneOrMore>
        <rng:ref name="model.manifestationLike"/>
      </rng:oneOrMore>
    </content>
  </elementSpec>
</specGrp>
